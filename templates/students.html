<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Students List</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',sans-serif;background:#0f0f23;min-height:100vh}#particles{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1}.particle{position:absolute;width:4px;height:4px;background:rgba(102,126,234,0.6);border-radius:50%;animation:float 15s infinite ease-in-out}@keyframes float{0%,100%{transform:translate3d(0,0,0) scale(1)}25%{transform:translate3d(50px,-100px,0) scale(1.2)}50%{transform:translate3d(-50px,-50px,0) scale(0.8)}75%{transform:translate3d(30px,-150px,0) scale(1.1)}}.navbar{position:relative;z-index:2;background:rgba(255,255,255,0.05);backdrop-filter:blur(20px);padding:20px 40px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,0.1)}.navbar h1{color:#fff;font-size:1.5em}.btn{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:10px 20px;border-radius:10px;cursor:pointer;text-decoration:none;display:inline-block;transition:all 0.3s}.btn:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(102,126,234,0.4)}.container{position:relative;z-index:2;max-width:1400px;margin:40px auto;padding:20px}.header{text-align:center;color:#fff;margin-bottom:40px}.header h2{font-size:2.5em;margin-bottom:10px}.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:40px}.stat-card{background:rgba(255,255,255,0.05);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,0.1);border-radius:15px;padding:25px;text-align:center;transition:all 0.3s}.stat-card:hover{transform:translateY(-5px);box-shadow:0 10px 30px rgba(102,126,234,0.3)}.stat-value{font-size:2.5em;font-weight:bold;color:#667eea;margin-bottom:5px}.stat-label{color:#a0aec0;font-size:0.9em}.table-container{background:rgba(255,255,255,0.05);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,0.1);border-radius:20px;padding:30px;overflow-x:auto}table{width:100%;border-collapse:collapse;color:#fff}th{background:rgba(102,126,234,0.2);padding:15px;text-align:left;font-weight:600;border-bottom:2px solid rgba(102,126,234,0.5)}td{padding:15px;border-bottom:1px solid rgba(255,255,255,0.1)}tr:hover{background:rgba(255,255,255,0.05)}.badge{padding:5px 15px;border-radius:20px;font-size:0.85em;font-weight:bold}.badge-excellent{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.badge-good{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}.badge-average{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff}.badge-poor{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff}.no-data{text-align:center;padding:60px;color:#a0aec0;font-size:1.2em}
</style>
</head>
<body>
<div id="particles"></div>
<nav class="navbar">
<h1>üéì Students List</h1>
<div>
<a href="/dashboard" class="btn">‚Üê Dashboard</a>
<a href="/export_csv" class="btn">üì• CSV</a>
<a href="/export_excel" class="btn">üìÑ Excel</a>
</div>
</nav>
<div class="container">
<div class="header">
<h2>üë• Evaluated Students</h2>
<p style="color:#a0aec0">Complete list of all evaluated students</p>
</div>
<div class="stats-grid">
<div class="stat-card">
<div class="stat-value">{{students|length}}</div>
<div class="stat-label">Total Students</div>
</div>
<div class="stat-card">
<div class="stat-value">{{students|selectattr('percentage','ge',90)|list|length}}</div>
<div class="stat-label">Excellent (90%+)</div>
</div>
<div class="stat-card">
<div class="stat-value">{{students|selectattr('percentage','ge',70)|selectattr('percentage','lt',90)|list|length}}</div>
<div class="stat-label">Good (70-89%)</div>
</div>
<div class="stat-card">
<div class="stat-value">{{students|selectattr('percentage','lt',70)|list|length}}</div>
<div class="stat-label">Below 70%</div>
</div>
</div>
<div class="table-container">
{% if students %}
<table>
<thead>
<tr>
<th>Name</th>
<th>ID</th>
<th>Report Type</th>
<th>Gender</th>
<th>Score</th>
<th>Percentage</th>
<th>Grade</th>
<th>Date</th>
<th>Actions</th>
</tr>
</thead>
<tbody>
{% for student in students %}
<tr>
<td>{{student.name}}</td>
<td>{{student.id}}</td>
<td>{{student.report_type}}</td>
<td>{{student.gender}}</td>
<td>{{student.total_score}}/70</td>
<td>{{"%.1f"|format(student.percentage)}}%</td>
<td>
<span class="badge {% if student.percentage>=90 %}badge-excellent{% elif student.percentage>=70 %}badge-good{% elif student.percentage>=60 %}badge-average{% else %}badge-poor{% endif %}">
{{student.grade}}
</span>
</td>
<td>{{student.date}}</td>
<td>
  <button class="btn" onclick="deleteStudent({{loop.index0}})" style="background:#ef4444">Delete</button>
</td>
</tr>
{% endfor %}
</tbody>
</table>
{% else %}
<div class="no-data">
üí≠ No students evaluated yet. Start your first evaluation!
</div>
{% endif %}
</div>
</div>
<script>
async function deleteStudent(idx){
  if(!confirm('Delete this student entry?')) return;
  const res = await fetch(`/students/delete/${idx}`, {method:'POST'});
  if(res.ok){
    location.reload();
  } else {
    alert('Failed to delete student');
  }
}
function createParticles(){const c=document.getElementById('particles');for(let i=0;i<50;i++){const p=document.createElement('div');p.className='particle';p.style.left=Math.random()*100+'%';p.style.top=Math.random()*100+'%';p.style.animationDelay=Math.random()*15+'s';p.style.animationDuration=(10+Math.random()*10)+'s';c.appendChild(p)}}window.onload=createParticles;
</script>
</body>
</html>
